[가챠 연동형 덱 빌딩 로그라이크 - 통합 게임 로직 설계서]

1. 덱 생성 및 초기화 (Setup)
--------------------------------------------------
- 구성: 유저 선택 가챠 카드(N) + 공용 카드(15-N) = 총 15장.
- 셔플: 15장의 카드를 무작위로 섞어 Draw Pile 생성.
- 초기 상태: HP 50/50, Energy 3/3, Shield 0.
- 시작 핸드: 최초 3장 드로우로 시작.

2. 턴 시스템 및 핸드 관리 (Turn & Hand)
--------------------------------------------------
- 드로우: 매 턴 시작 시 2장 드로우.
- 핸드 제한: 최대 10장 (초과 시 자동으로 Discard Pile 이동).
- 에너지: 매 턴 3으로 초기화 (특수 효과로 최대치 확장 가능).
- 덱 순환: Draw Pile이 비면 Discard Pile을 셔플하여 재구성.

3. 속성 상성 및 데미지 계수 (Multipliers)
--------------------------------------------------
- [혁명단] -> [기만/십다구]: 1.5배
- [기만] -> [노말/혁명단]: 1.5배
- [십다구] -> [노말/기만]: 1.5배
- [노말] -> [혁명단]: 2.0배 (카운터)
- 열세 상성: 0.8배

4. 속성별 심화 기믹 (Mechanics)
--------------------------------------------------
(1) 혁명단 [투지]: 내 HP 40% 이하 시 공격력 1.5배 (상성 중첩 가능).
(2) 기만 [교란]: 카드 사용 시 '교란 스택' 획득. 회피 확률 = (스택 * 5%). 
    *회피 성공 시 스택 소모. 특정 카드로 기본 확률 영구 강화 가능.
(3) 십다구 [몰입]: 한 턴에 3장 이상 사용 시, 4장째부터 Cost -1 및 데미지 +2.
(4) 노말 [정석]: 턴 종료 시 Shield를 소멸시키지 않고 100% 다음 턴으로 이월.

5. 기믹 카운터 및 특수 효과 (Counter System)
--------------------------------------------------
- [관통]: 노말의 이월 Shield를 무시하고 HP에 직접 데미지.
- [강타]: 기만의 교란 스택을 모두 제거하고 1턴간 회피 불가 부여.
- [평정]: 혁명단의 투지(버프)를 해제하고 일반 데미지로 고정.
- [과부하]: 십다구의 몰입 효과를 중단시키고 다음 턴 드로우 -1.

6. 저장 및 성장 (Persistence)
--------------------------------------------------
- Firebase 연동: 층별 클리어 시 덱 상태(강화/삭제), 잔여 HP 실시간 저장.
- 로그라이크 보상: 전투 승리 후 '덱 압축(삭제)' 또는 '카드 강화(+30%)' 선택 가능.
- 기록: 사망 시 도달 층수와 최종 덱 리스트를 Run History에 아카이브.
